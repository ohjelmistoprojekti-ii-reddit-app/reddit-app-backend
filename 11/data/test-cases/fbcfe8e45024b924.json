{"uid":"fbcfe8e45024b924","name":"test_login_with_nonexistent_user","fullName":"tests.rest_api.test_authentication.TestLoginUser#test_login_with_nonexistent_user","historyId":"672fc54f31cecede5af017214524fa65","time":{"start":1763828621623,"stop":1763828621624,"duration":1},"description":"Test logging in with a username that does not exist in the database. Verify that appropriate error message is returned.","descriptionHtml":"<p>Test logging in with a username that does not exist in the database. Verify that appropriate error message is returned.</p>\n","status":"broken","statusMessage":"ConnectionError: Could not connect to database: ATLAS_CONNECTION_STR is not set","statusTrace":"def connect_db():\n        try:\n            uri = os.getenv(\"ATLAS_CONNECTION_STR\")\n            if not uri:\n>               raise ValueError(\"ATLAS_CONNECTION_STR is not set\")\nE               ValueError: ATLAS_CONNECTION_STR is not set\n\napp/services/db.py:9: ValueError\n\nDuring handling of the above exception, another exception occurred:\n\nself = <test_authentication.TestLoginUser object at 0x7f4f76f3f140>\nclient = <FlaskClient <Flask 'app'>>\n\n    @allure.sub_suite(\"Login with nonexistent user\")\n    @allure.description(\"Test logging in with a username that does not exist in the database. Verify that appropriate error message is returned.\")\n    def test_login_with_nonexistent_user(self, client):\n>       response = login_user(client, \"nonexistentuser\", \"password\")\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\ntests/rest_api/test_authentication.py:176: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \ntests/helpers.py:17: in login_user\n    return client.post(\n/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/werkzeug/test.py:1167: in post\n    return self.open(*args, **kw)\n           ^^^^^^^^^^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/flask/testing.py:235: in open\n    response = super().open(\n/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/werkzeug/test.py:1116: in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/werkzeug/test.py:988: in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/werkzeug/test.py:1264: in run_wsgi_app\n    app_rv = app(environ, start_response)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/flask/app.py:1536: in __call__\n    return self.wsgi_app(environ, start_response)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/flask/app.py:1514: in wsgi_app\n    response = self.handle_exception(e)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/flask_cors/extension.py:176: in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ^^^^^^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/flask/app.py:1511: in wsgi_app\n    response = self.full_dispatch_request()\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/flask/app.py:919: in full_dispatch_request\n    rv = self.handle_user_exception(e)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/flask_cors/extension.py:176: in wrapped_function\n    return cors_after_request(app.make_response(f(*args, **kwargs)))\n                                                ^^^^^^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/flask/app.py:917: in full_dispatch_request\n    rv = self.dispatch_request()\n         ^^^^^^^^^^^^^^^^^^^^^^^\n/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/flask/app.py:902: in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\napp/routes/authentication.py:22: in login\n    users = fetch_data_from_collection(\"users\", {\"username\": username})\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\napp/services/db.py:47: in fetch_data_from_collection\n    client, db = connect_db()\n                 ^^^^^^^^^^^^\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\n    def connect_db():\n        try:\n            uri = os.getenv(\"ATLAS_CONNECTION_STR\")\n            if not uri:\n                raise ValueError(\"ATLAS_CONNECTION_STR is not set\")\n    \n            client = MongoClient(uri)\n            db = client.reddit\n            return client, db\n        except Exception as e:\n>           raise ConnectionError(f\"Could not connect to database: {e}\")\nE           ConnectionError: Could not connect to database: ATLAS_CONNECTION_STR is not set\n\napp/services/db.py:15: ConnectionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"app","time":{"start":1763828621613,"stop":1763828621623,"duration":10},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"client","time":{"start":1763828621623,"stop":1763828621623,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[{"name":"app::0","time":{"start":1763828621720,"stop":1763828621720,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"Authentication tests"},{"name":"subSuite","value":"Login with nonexistent user"},{"name":"suite","value":"TC-14: Login user"},{"name":"severity","value":"critical"},{"name":"host","value":"runnervmg1sw1"},{"name":"thread","value":"2505-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.rest_api.test_authentication"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"critical","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"fbcfe8e45024b924.json","parameterValues":[]}
{"uid":"238dc9bff606fc07","name":"test_calculate_top_topics_with_large_limit","fullName":"tests.database.test_database_analysis_results.TestCalculateTopTopicsStatistics#test_calculate_top_topics_with_large_limit","historyId":"47499abdce97be80f67942e6a2f39579","time":{"start":1764019265815,"stop":1764019265816,"duration":1},"description":"Test calculating top topics with a large limit, and verify that all available topics are returned without error.","descriptionHtml":"<p>Test calculating top topics with a large limit, and verify that all available topics are returned without error.</p>\n","status":"failed","statusMessage":"AssertionError: assert 3 == 4\n +  where 3 = len([{'count': 1, 'topic': 'A'}, {'count': 1, 'topic': 'B'}, {'count': 1, 'topic': 'D'}])","statusTrace":"self = <test_database_analysis_results.TestCalculateTopTopicsStatistics object at 0x7f56389641a0>\nmock_db = Database(mongomock.MongoClient('localhost', 27017), 'reddit')\n\n    @allure.sub_suite(\"Calculate top topics with large limit\")\n    @allure.description(\"Test calculating top topics with a large limit, and verify that all available topics are returned without error.\")\n    def test_calculate_top_topics_with_large_limit(self, mock_db):\n        db = mock_db\n    \n        subreddit = \"example\"\n        current_date = datetime.now(timezone.utc)\n        test_data = [\n            { \"subreddit\": subreddit, \"topic\": [\"A\", \"B\", \"C\"], \"timestamp\": current_date },\n            { \"subreddit\": subreddit, \"topic\": [\"A\", \"B\", \"D\"], \"timestamp\": (current_date - timedelta(days=1)) },\n        ]\n    \n        # Tested function uses hardcoded collection name \"posts\"\n        db[\"posts\"].insert_many(test_data)\n    \n        large_limit = 50\n        topic_stats = get_top_topics_by_timeperiod(subreddit=subreddit, number_of_days=2, limit=large_limit)\n    \n        assert isinstance(topic_stats, list)\n        results = topic_stats[0]\n    \n        # Expecting all unique topics (A, B, C, D) to be returned (today's data included)\n>       assert len(results[\"topics\"]) == 4\nE       AssertionError: assert 3 == 4\nE        +  where 3 = len([{'count': 1, 'topic': 'A'}, {'count': 1, 'topic': 'B'}, {'count': 1, 'topic': 'D'}])\n\ntests/database/test_database_analysis_results.py:258: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"monkeypatch","time":{"start":1764019265815,"stop":1764019265815,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"mock_db","time":{"start":1764019265815,"stop":1764019265815,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[{"name":"monkeypatch::0","time":{"start":1764019265822,"stop":1764019265822,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"mock_db::0","time":{"start":1764019265822,"stop":1764019265822,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"Database tests"},{"name":"suite","value":"TC-07: Calculate top topics statistics from analysis results"},{"name":"subSuite","value":"Calculate top topics with large limit"},{"name":"severity","value":"normal"},{"name":"host","value":"runnervmg1sw1"},{"name":"thread","value":"2504-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.database.test_database_analysis_results"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":12,"broken":0,"skipped":0,"passed":0,"unknown":0,"total":12},"items":[{"uid":"ac0933d3198e2117","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/19/#testresult/ac0933d3198e2117","status":"failed","statusDetails":"AssertionError: assert 3 == 4\n +  where 3 = len([{'count': 1, 'topic': 'A'}, {'count': 1, 'topic': 'B'}, {'count': 1, 'topic': 'D'}])","time":{"start":1764018818952,"stop":1764018818952,"duration":0}},{"uid":"21aa1f49f0eaded4","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/18/#testresult/21aa1f49f0eaded4","status":"failed","statusDetails":"AssertionError: assert 3 == 4\n +  where 3 = len([{'count': 1, 'topic': 'A'}, {'count': 1, 'topic': 'B'}, {'count': 1, 'topic': 'D'}])","time":{"start":1763996164374,"stop":1763996164375,"duration":1}},{"uid":"ee6b8ad5ec7ef030","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/17/#testresult/ee6b8ad5ec7ef030","status":"failed","statusDetails":"AssertionError: assert 3 == 4\n +  where 3 = len([{'count': 1, 'topic': 'A'}, {'count': 1, 'topic': 'B'}, {'count': 1, 'topic': 'D'}])","time":{"start":1763995507632,"stop":1763995507633,"duration":1}},{"uid":"eb0f11d44e2ffaea","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/16/#testresult/eb0f11d44e2ffaea","status":"failed","statusDetails":"AssertionError: assert 3 == 4\n +  where 3 = len([{'count': 1, 'topic': 'A'}, {'count': 1, 'topic': 'B'}, {'count': 1, 'topic': 'D'}])","time":{"start":1763994990407,"stop":1763994990408,"duration":1}},{"uid":"1be535ba7854fe4c","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/15/#testresult/1be535ba7854fe4c","status":"failed","statusDetails":"AssertionError: assert 3 == 4\n +  where 3 = len([{'count': 1, 'topic': 'A'}, {'count': 1, 'topic': 'B'}, {'count': 1, 'topic': 'D'}])","time":{"start":1763992334527,"stop":1763992334527,"duration":0}},{"uid":"2d16318ff0061083","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/14/#testresult/2d16318ff0061083","status":"failed","statusDetails":"AssertionError: assert 3 == 4\n +  where 3 = len([{'count': 1, 'topic': 'A'}, {'count': 1, 'topic': 'B'}, {'count': 1, 'topic': 'D'}])","time":{"start":1763992052935,"stop":1763992052936,"duration":1}},{"uid":"ef4258445bb9adbe","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/13/#testresult/ef4258445bb9adbe","status":"failed","statusDetails":"AssertionError: assert 3 == 4\n +  where 3 = len([{'count': 1, 'topic': 'A'}, {'count': 1, 'topic': 'B'}, {'count': 1, 'topic': 'D'}])","time":{"start":1763990239991,"stop":1763990239992,"duration":1}},{"uid":"22a05758192a8ed6","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/12/#testresult/22a05758192a8ed6","status":"failed","statusDetails":"AssertionError: assert 3 == 4\n +  where 3 = len([{'count': 1, 'topic': 'A'}, {'count': 1, 'topic': 'B'}, {'count': 1, 'topic': 'D'}])","time":{"start":1763829101617,"stop":1763829101617,"duration":0}},{"uid":"88e3744ab673b9bf","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/11/#testresult/88e3744ab673b9bf","status":"failed","statusDetails":"AssertionError: assert 3 == 4\n +  where 3 = len([{'count': 1, 'topic': 'A'}, {'count': 1, 'topic': 'B'}, {'count': 1, 'topic': 'D'}])","time":{"start":1763828620955,"stop":1763828620956,"duration":1}},{"uid":"3927375b4dbd761","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/10/#testresult/3927375b4dbd761","status":"failed","statusDetails":"AssertionError: assert 3 == 4\n +  where 3 = len([{'count': 1, 'topic': 'A'}, {'count': 1, 'topic': 'B'}, {'count': 1, 'topic': 'D'}])","time":{"start":1763824513911,"stop":1763824513911,"duration":0}},{"uid":"f737b5803e93a551","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/9/#testresult/f737b5803e93a551","status":"failed","statusDetails":"AssertionError: assert 3 == 4\n +  where 3 = len([{'count': 1, 'topic': 'A'}, {'count': 1, 'topic': 'B'}, {'count': 1, 'topic': 'D'}])","time":{"start":1763821889987,"stop":1763821889988,"duration":1}}]},"tags":[]},"source":"238dc9bff606fc07.json","parameterValues":[]}
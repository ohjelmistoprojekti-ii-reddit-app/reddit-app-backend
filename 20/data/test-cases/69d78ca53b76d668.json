{"uid":"69d78ca53b76d668","name":"test_fetch_latest_results_with_type_filter","fullName":"tests.database.test_database_analysis_results.TestFetchLatestAnalysisResultsFromDatabase#test_fetch_latest_results_with_type_filter","historyId":"5b7abd72b59f120a549bed54cd1142fb","time":{"start":1764019265719,"stop":1764019265719,"duration":0},"description":"Test fetching latest data with type filter from the database, and verify that correct documents (with most recent timestamp and correct type) are returned.","descriptionHtml":"<p>Test fetching latest data with type filter from the database, and verify that correct documents (with most recent timestamp and correct type) are returned.</p>\n","status":"failed","statusMessage":"AssertionError: assert 0 == 1\n +  where 0 = len([])","statusTrace":"self = <test_database_analysis_results.TestFetchLatestAnalysisResultsFromDatabase object at 0x7f56384a0c80>\nmock_db = Database(mongomock.MongoClient('localhost', 27017), 'reddit')\n\n    @allure.sub_suite(\"Fetch latest data with type filter\")\n    @allure.description(\"Test fetching latest data with type filter from the database, and verify that correct documents (with most recent timestamp and correct type) are returned.\")\n    def test_fetch_latest_results_with_type_filter(self, mock_db):\n        db = mock_db\n    \n        subreddit = \"example\"\n        test_data = [\n            { \"type\": \"topics\", \"label\": \"Topic A\", \"subreddit\": subreddit, \"timestamp\": datetime(2025, 9, 1, 10, 0, tzinfo=timezone.utc) },\n            { \"type\": \"topics\", \"label\": \"Topic B\", \"subreddit\": subreddit, \"timestamp\": datetime(2025, 10, 1, 10, 0, tzinfo=timezone.utc) },\n            { \"type\": \"posts\", \"posts\": [{\"title\": \"Example post\"}], \"subreddit\": subreddit, \"timestamp\": datetime(2025, 11, 1, 10, 0, tzinfo=timezone.utc) },\n        ]\n    \n        collection = \"test_collection\"\n        db[collection].insert_many(test_data)\n    \n        fetched_data = get_latest_data_by_subreddit(collection, subreddit=subreddit, type=\"topics\")\n        assert isinstance(fetched_data, list)\n>       assert len(fetched_data) == 1 # Check that only one document of type \"topics\" is returned\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE       assert 0 == 1\nE        +  where 0 = len([])\n\ntests/database/test_database_analysis_results.py:62: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"monkeypatch","time":{"start":1764019265718,"stop":1764019265718,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"mock_db","time":{"start":1764019265718,"stop":1764019265719,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[{"name":"mock_db::0","time":{"start":1764019265780,"stop":1764019265780,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"monkeypatch::0","time":{"start":1764019265781,"stop":1764019265781,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"suite","value":"TC-05: Fetch latest analysis results from database"},{"name":"parentSuite","value":"Database tests"},{"name":"subSuite","value":"Fetch latest data with type filter"},{"name":"severity","value":"critical"},{"name":"host","value":"runnervmg1sw1"},{"name":"thread","value":"2504-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.database.test_database_analysis_results"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"critical","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":12,"broken":0,"skipped":0,"passed":0,"unknown":0,"total":12},"items":[{"uid":"cf1f001e2a0eef96","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/19/#testresult/cf1f001e2a0eef96","status":"failed","statusDetails":"AssertionError: assert 0 == 1\n +  where 0 = len([])","time":{"start":1764018818854,"stop":1764018818855,"duration":1}},{"uid":"f4d4c61cbe3e1e8d","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/18/#testresult/f4d4c61cbe3e1e8d","status":"failed","statusDetails":"AssertionError: assert 0 == 1\n +  where 0 = len([])","time":{"start":1763996164279,"stop":1763996164279,"duration":0}},{"uid":"6f853d59daee3e23","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/17/#testresult/6f853d59daee3e23","status":"failed","statusDetails":"AssertionError: assert 0 == 1\n +  where 0 = len([])","time":{"start":1763995507524,"stop":1763995507525,"duration":1}},{"uid":"e575d54542f0e851","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/16/#testresult/e575d54542f0e851","status":"failed","statusDetails":"AssertionError: assert 0 == 1\n +  where 0 = len([])","time":{"start":1763994990304,"stop":1763994990305,"duration":1}},{"uid":"ec3d29927baebe4c","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/15/#testresult/ec3d29927baebe4c","status":"failed","statusDetails":"AssertionError: assert 0 == 1\n +  where 0 = len([])","time":{"start":1763992334426,"stop":1763992334427,"duration":1}},{"uid":"86e305d4776df86c","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/14/#testresult/86e305d4776df86c","status":"failed","statusDetails":"AssertionError: assert 0 == 1\n +  where 0 = len([])","time":{"start":1763992052856,"stop":1763992052857,"duration":1}},{"uid":"dff77b85702adeb5","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/13/#testresult/dff77b85702adeb5","status":"failed","statusDetails":"AssertionError: assert 0 == 1\n +  where 0 = len([])","time":{"start":1763990239911,"stop":1763990239912,"duration":1}},{"uid":"d80b137aafeea817","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/12/#testresult/d80b137aafeea817","status":"failed","statusDetails":"AssertionError: assert 0 == 1\n +  where 0 = len([])","time":{"start":1763829101519,"stop":1763829101520,"duration":1}},{"uid":"5f5f26f3ccd2f0ed","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/11/#testresult/5f5f26f3ccd2f0ed","status":"failed","statusDetails":"AssertionError: assert 0 == 1\n +  where 0 = len([])","time":{"start":1763828620853,"stop":1763828620854,"duration":1}},{"uid":"256d17fbc05dc3b","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/10/#testresult/256d17fbc05dc3b","status":"failed","statusDetails":"AssertionError: assert 0 == 1\n +  where 0 = len([])","time":{"start":1763824513814,"stop":1763824513815,"duration":1}},{"uid":"a28b4b79f542b6d","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/9/#testresult/a28b4b79f542b6d","status":"failed","statusDetails":"AssertionError: assert 0 == 1\n +  where 0 = len([])","time":{"start":1763821889892,"stop":1763821889893,"duration":1}}]},"tags":[]},"source":"69d78ca53b76d668.json","parameterValues":[]}
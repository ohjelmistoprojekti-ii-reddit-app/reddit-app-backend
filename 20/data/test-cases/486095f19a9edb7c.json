{"uid":"486095f19a9edb7c","name":"test_calculate_post_numbers_for_existing_subreddit","fullName":"tests.database.test_database_analysis_results.TestCalculatePostNumberStatistics#test_calculate_post_numbers_for_existing_subreddit","historyId":"efa1213355e04f0c78c6de1ea5246c90","time":{"start":1764019265788,"stop":1764019265789,"duration":1},"description":"Test calculating post numbers for existing subreddit, and verify that the correct post count statistics are returned. Expects today's statistics to be included.","descriptionHtml":"<p>Test calculating post numbers for existing subreddit, and verify that the correct post count statistics are returned. Expects today's statistics to be included.</p>\n","status":"failed","statusMessage":"AssertionError: assert False","statusTrace":"self = <test_database_analysis_results.TestCalculatePostNumberStatistics object at 0x7f5638966cc0>\nmock_db = Database(mongomock.MongoClient('localhost', 27017), 'reddit')\n\n    @allure.sub_suite(\"Calculate post numbers for existing subreddit\")\n    @allure.description(\"Test calculating post numbers for existing subreddit, and verify that the correct post count statistics are returned. Expects today's statistics to be included.\")\n    def test_calculate_post_numbers_for_existing_subreddit(self, mock_db):\n        db = mock_db\n    \n        subreddit = \"example\"\n    \n        # Ensure test data includes today's date\n        current_date = datetime.now(timezone.utc)\n        test_data =[\n            { \"subreddit\": subreddit, \"num_posts\": 5, \"timestamp\": current_date },\n            { \"subreddit\": subreddit, \"num_posts\": 10, \"timestamp\": (current_date - timedelta(days=1)) },\n            { \"subreddit\": subreddit, \"num_posts\": 15, \"timestamp\": (current_date - timedelta(days=2)) },\n        ]\n    \n        # Tested function uses hardcoded collection name \"posts\"\n        db[\"posts\"].insert_many(test_data)\n    \n        # High number_of_days to include all test data\n        number_of_days = 10\n        post_stats = get_post_numbers_by_timeperiod(subreddit=subreddit, number_of_days=number_of_days)\n        assert isinstance(post_stats, list)\n        results = post_stats[0]\n    \n        current_date_str = current_date.strftime(\"%Y-%m-%d\")\n    \n        current_date_found = False\n        for stat in results[\"daily\"]:\n            if stat[\"day\"] == current_date_str:\n                current_date_found = True\n                break\n    \n>       assert current_date_found # Verify that today's statistics are included\n        ^^^^^^^^^^^^^^^^^^^^^^^^^\nE       assert False\n\ntests/database/test_database_analysis_results.py:149: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"mock_db","time":{"start":1764019265787,"stop":1764019265787,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"monkeypatch","time":{"start":1764019265787,"stop":1764019265787,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[{"name":"mock_db::0","time":{"start":1764019265794,"stop":1764019265794,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"monkeypatch::0","time":{"start":1764019265794,"stop":1764019265794,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"Database tests"},{"name":"subSuite","value":"Calculate post numbers for existing subreddit"},{"name":"suite","value":"TC-06: Calculate post number statistics from analysis results"},{"name":"severity","value":"normal"},{"name":"host","value":"runnervmg1sw1"},{"name":"thread","value":"2504-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.database.test_database_analysis_results"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":12,"broken":0,"skipped":0,"passed":0,"unknown":0,"total":12},"items":[{"uid":"15eb8831865a65d7","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/19/#testresult/15eb8831865a65d7","status":"failed","statusDetails":"AssertionError: assert False","time":{"start":1764018818922,"stop":1764018818923,"duration":1}},{"uid":"f947f1dc768e1b87","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/18/#testresult/f947f1dc768e1b87","status":"failed","statusDetails":"AssertionError: assert False","time":{"start":1763996164346,"stop":1763996164347,"duration":1}},{"uid":"1302a0ea69a0844a","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/17/#testresult/1302a0ea69a0844a","status":"failed","statusDetails":"AssertionError: assert False","time":{"start":1763995507597,"stop":1763995507598,"duration":1}},{"uid":"b73a4298708d97ed","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/16/#testresult/b73a4298708d97ed","status":"failed","statusDetails":"AssertionError: assert False","time":{"start":1763994990375,"stop":1763994990377,"duration":2}},{"uid":"6b06fda1ee686797","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/15/#testresult/6b06fda1ee686797","status":"failed","statusDetails":"AssertionError: assert False","time":{"start":1763992334496,"stop":1763992334497,"duration":1}},{"uid":"22823451c38ff620","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/14/#testresult/22823451c38ff620","status":"failed","statusDetails":"AssertionError: assert False","time":{"start":1763992052908,"stop":1763992052909,"duration":1}},{"uid":"d4649852b5b82aa5","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/13/#testresult/d4649852b5b82aa5","status":"failed","statusDetails":"AssertionError: assert False","time":{"start":1763990239963,"stop":1763990239964,"duration":1}},{"uid":"6f0b634b3e49db0d","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/12/#testresult/6f0b634b3e49db0d","status":"failed","statusDetails":"AssertionError: assert False","time":{"start":1763829101588,"stop":1763829101589,"duration":1}},{"uid":"fd2f21fbecc4a0b8","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/11/#testresult/fd2f21fbecc4a0b8","status":"failed","statusDetails":"AssertionError: assert False","time":{"start":1763828620926,"stop":1763828620927,"duration":1}},{"uid":"12b3ca7cd6d55585","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/10/#testresult/12b3ca7cd6d55585","status":"failed","statusDetails":"AssertionError: assert False","time":{"start":1763824513882,"stop":1763824513883,"duration":1}},{"uid":"81ce64324d730b7","reportUrl":"https://ohjelmistoprojekti-ii-reddit-app.github.io/reddit-app-backend/9/#testresult/81ce64324d730b7","status":"failed","statusDetails":"AssertionError: assert False","time":{"start":1763821889959,"stop":1763821889960,"duration":1}}]},"tags":[]},"source":"486095f19a9edb7c.json","parameterValues":[]}